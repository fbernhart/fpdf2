<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>fpdf.html API documentation</title>
<meta name="description" content="HTML Renderer for FPDF.py" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>fpdf.html</code></h1>
</header>
<section id="section-intro">
<p>HTML Renderer for FPDF.py</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;HTML Renderer for FPDF.py&#34;&#34;&#34;

__author__ = &#34;Mariano Reingart &lt;reingart@gmail.com&gt;&#34;
__copyright__ = &#34;Copyright (C) 2010 Mariano Reingart&#34;
__license__ = &#34;LGPL 3.0&#34;

# Inspired by tuto5.py and several examples from fpdf.org, html2fpdf, etc.

import html
import logging
from html.parser import HTMLParser

LOGGER = logging.getLogger(__name__)


def px2mm(px):
    return int(px) * 25.4 / 72


def hex2dec(color=&#34;#000000&#34;):
    if not color:
        return None
    r = int(color[1:3], 16)
    g = int(color[3:5], 16)
    b = int(color[5:7], 16)
    return r, g, b


class HTML2FPDF(HTMLParser):
    &#34;&#34;&#34;Render basic HTML to FPDF&#34;&#34;&#34;

    def __init__(self, pdf, image_map=None, table_line_separators=False):
        &#34;&#34;&#34;
        Args:
            pdf (FPDF): an instance of `fpdf.FPDF`
            image_map (function): an optional one-argument function that map &lt;img&gt; &#34;src&#34;
                to new image URLs
            table_line_separators (bool): enable horizontal line separators in &lt;table&gt;
        &#34;&#34;&#34;
        super().__init__()
        self.pdf = pdf
        self.image_map = image_map or (lambda src: src)
        self.table_line_separators = table_line_separators
        self.style = dict(b=False, i=False, u=False)
        self.href = &#34;&#34;
        self.align = &#34;&#34;
        self.page_links = {}
        self.font_stack = []
        self.indent = 0
        self.bullet = []
        self.font_size = pdf.font_size_pt
        self.set_font(&#34;times&#34;, self.font_size)
        self.font_color = 0, 0, 0  # initialize font color, r,g,b format
        self.table = None  # table attributes
        self.table_col_width = None  # column (header) widths
        self.table_col_index = None  # current column index
        self.td = None  # inside a &lt;td&gt;, attributes dict
        self.th = None  # inside a &lt;th&gt;, attributes dict
        self.tr = None  # inside a &lt;tr&gt;, attributes dict
        self.thead = None  # inside a &lt;thead&gt;, attributes dict
        self.tfoot = None  # inside a &lt;tfoot&gt;, attributes dict
        self.tr_index = None  # row index
        self.theader = None  # table header cells
        self.tfooter = None  # table footer cells
        self.theader_out = self.tfooter_out = False
        self.hsize = dict(h1=2, h2=1.5, h3=1.17, h4=1, h5=0.83, h6=0.67)

    def width2mm(self, length):
        if length[-1] == &#34;%&#34;:
            total = self.pdf.w - self.pdf.r_margin - self.pdf.l_margin
            if self.table[&#34;width&#34;][-1] == &#34;%&#34;:
                total *= int(self.table[&#34;width&#34;][:-1]) / 100
            return int(length[:-1]) * total / 101
        return int(length) / 6

    def handle_data(self, data):
        if self.td is not None:  # drawing a table?
            if &#34;width&#34; not in self.td and &#34;colspan&#34; not in self.td:
                # pylint: disable=raise-missing-from
                try:
                    l = [self.table_col_width[self.table_col_index]]
                except IndexError:
                    raise ValueError(
                        f&#34;Width not specified for table column {self.table_col_index},&#34;
                        &#34; unable to continue&#34;
                    )
            elif &#34;colspan&#34; in self.td:
                i = self.table_col_index
                colspan = int(self.td[&#34;colspan&#34;])
                l = self.table_col_width[i : i + colspan]
            else:
                l = [self.td.get(&#34;width&#34;, &#34;240&#34;)]
            w = sum(self.width2mm(length) for length in l)
            h = int(self.td.get(&#34;height&#34;, 0)) // 4 or self.h * 1.30
            self.table_h = h
            border = int(self.table.get(&#34;border&#34;, 0))
            if not self.th:
                align = self.td.get(&#34;align&#34;, &#34;L&#34;)[0].upper()
                border = border and &#34;LR&#34;
            else:
                self.set_style(&#34;B&#34;, True)
                border = border or &#34;B&#34;
                align = self.td.get(&#34;align&#34;, &#34;C&#34;)[0].upper()
            bgcolor = hex2dec(self.td.get(&#34;bgcolor&#34;, self.tr.get(&#34;bgcolor&#34;, &#34;&#34;)))
            # parsing table header/footer (drawn later):
            if self.thead is not None:
                self.theader.append(((w, h, data, border, 0, align), bgcolor))
            if self.tfoot is not None:
                self.tfooter.append(((w, h, data, border, 0, align), bgcolor))
            # check if reached end of page, add table footer and header:
            height = h + (self.tfooter and self.tfooter[0][0][1] or 0)
            if self.pdf.y + height &gt; self.pdf.page_break_trigger and not self.th:
                self.output_table_footer()
                self.pdf.add_page(same=True)
                self.theader_out = self.tfooter_out = False
            if self.tfoot is None and self.thead is None:
                if not self.theader_out:
                    self.output_table_header()
                self.box_shadow(w, h, bgcolor)
                LOGGER.debug(&#34;td cell %s %s %s *&#34;, self.pdf.x, w, data)
                self.pdf.cell(w, h, data, border=border, ln=0, align=align)
        elif self.table is not None:
            # ignore anything else than td inside a table
            pass
        elif self.align:
            LOGGER.debug(&#34;cell %s *&#34;, data)
            self.pdf.cell(
                0,
                self.h,
                data,
                border=0,
                ln=1,
                align=self.align[0].upper(),
                link=self.href,
            )
        else:
            data = data.replace(&#34;\n&#34;, &#34; &#34;)
            if self.href:
                self.put_link(self.href, data)
            else:
                LOGGER.debug(&#34;write %s *&#34;)
                self.pdf.write(self.h, data)

    def box_shadow(self, w, h, bgcolor):
        LOGGER.debug(&#34;box_shadow %s %s %s&#34;, w, h, bgcolor)
        if bgcolor:
            fill_color = self.pdf.fill_color
            self.pdf.set_fill_color(*bgcolor)
            self.pdf.rect(self.pdf.x, self.pdf.y, w, h, &#34;F&#34;)
            self.pdf.fill_color = fill_color

    def output_table_header(self):
        if self.theader:
            b = self.style.get(&#34;b&#34;)
            self.pdf.set_x(self.table_offset)
            self.set_style(&#34;b&#34;, True)
            for cell, bgcolor in self.theader:
                self.box_shadow(cell[0], cell[1], bgcolor)
                self.pdf.cell(*cell)  # includes the border
            self.set_style(&#34;b&#34;, b)
            self.pdf.ln(self.theader[0][0][1])
            self.pdf.set_x(self.table_offset)
            # self.pdf.set_x(prev_x)
        self.theader_out = True

    def output_table_footer(self):
        if self.tfooter:
            x = self.pdf.x
            self.pdf.set_x(self.table_offset)
            for cell, bgcolor in self.tfooter:
                self.box_shadow(cell[0], cell[1], bgcolor)
                self.pdf.cell(*cell)
            self.pdf.ln(self.tfooter[0][0][1])
            self.pdf.set_x(x)
        if self.table.get(&#34;border&#34;):
            self.output_table_sep()
        self.tfooter_out = True

    def output_table_sep(self):
        x1 = self.pdf.x
        y1 = self.pdf.y
        width = sum(self.width2mm(length) for length in self.table_col_width)
        self.pdf.line(x1, y1, x1 + width, y1)

    def handle_starttag(self, tag, attrs):
        attrs = dict(attrs)
        LOGGER.debug(&#34;STARTTAG %s %s&#34;)
        if tag in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;):
            self.set_style(tag, True)
        if tag == &#34;a&#34;:
            self.href = attrs[&#34;href&#34;]
        if tag == &#34;br&#34;:
            self.pdf.ln(self.h)
        if tag == &#34;p&#34;:
            self.pdf.ln(self.h)
            if attrs:
                self.align = attrs.get(&#34;align&#34;)
        if tag in self.hsize:
            k = self.hsize[tag]
            self.pdf.ln(5 * k)
            self.pdf.set_text_color(150, 0, 0)
            self.pdf.set_font_size(12 * k)
            if attrs:
                self.align = attrs.get(&#34;align&#34;)
        if tag == &#34;hr&#34;:
            self.pdf.add_page(same=True)
        if tag == &#34;pre&#34;:
            self.font_stack.append((self.font_face, self.font_size, self.font_color))
            self.set_font(&#34;courier&#34;, 11)
        if tag == &#34;blockquote&#34;:
            self.pdf.set_text_color(100, 0, 45)
            self.indent += 1
            self.pdf.ln(3)
        if tag == &#34;ul&#34;:
            self.indent += 1
            self.bullet.append(&#34;\x95&#34;)
        if tag == &#34;ol&#34;:
            self.indent += 1
            self.bullet.append(0)
        if tag == &#34;li&#34;:
            self.pdf.ln(self.h + 2)
            self.pdf.set_text_color(190, 0, 0)
            bullet = self.bullet[self.indent - 1]
            if not isinstance(bullet, str):
                bullet += 1
                self.bullet[self.indent - 1] = bullet
                bullet = f&#34;{bullet}. &#34;
            self.pdf.write(self.h, f&#34;{&#39; &#39; * 5 * self.indent}{bullet} &#34;)
            self.set_text_color()
        if tag == &#34;font&#34;:
            # save previous font state:
            self.font_stack.append((self.font_face, self.font_size, self.font_color))
            if &#34;color&#34; in attrs:
                color = hex2dec(attrs[&#34;color&#34;])
                self.font_color = color
            if &#34;face&#34; in attrs:
                face = attrs.get(&#34;face&#34;).lower()
                try:
                    self.pdf.set_font(face)
                    self.font_face = face
                except RuntimeError:
                    pass  # font not found, ignore
            if &#34;size&#34; in attrs:
                self.font_size = int(attrs.get(&#34;size&#34;))
            self.set_font()
            self.set_text_color()
        if tag == &#34;table&#34;:
            self.table = {k.lower(): v for k, v in attrs.items()}
            if &#34;width&#34; not in self.table:
                self.table[&#34;width&#34;] = &#34;100%&#34;
            if self.table[&#34;width&#34;][-1] == &#34;%&#34;:
                w = self.pdf.w - self.pdf.r_margin - self.pdf.l_margin
                w *= int(self.table[&#34;width&#34;][:-1]) / 100
                self.table_offset = (self.pdf.w - w) / 2
            self.table_col_width = []
            self.theader_out = self.tfooter_out = False
            self.theader = []
            self.tfooter = []
            self.thead = None
            self.tfoot = None
            self.table_h = 0
            self.pdf.ln()
        if tag == &#34;tr&#34;:
            self.tr_index = 0 if self.tr_index is None else (self.tr_index + 1)
            self.tr = {k.lower(): v for k, v in attrs.items()}
            self.table_col_index = 0
            self.pdf.set_x(self.table_offset)
            # Adding an horizontal line separator between rows:
            if self.table_line_separators and self.tr_index &gt; 0:
                self.output_table_sep()
        if tag == &#34;td&#34;:
            self.td = {k.lower(): v for k, v in attrs.items()}
        if tag == &#34;th&#34;:
            self.td = {k.lower(): v for k, v in attrs.items()}
            self.th = True
            if &#34;width&#34; in self.td:
                self.table_col_width.append(self.td[&#34;width&#34;])
        if tag == &#34;thead&#34;:
            self.thead = {}
        if tag == &#34;tfoot&#34;:
            self.tfoot = {}
        if tag == &#34;img&#34; and &#34;src&#34; in attrs:
            w = px2mm(attrs.get(&#34;width&#34;, 0))
            h = px2mm(attrs.get(&#34;height&#34;, 0))
            if self.pdf.y + h &gt; self.pdf.page_break_trigger:
                self.pdf.add_page(same=True)
            x = self.pdf.get_x()
            y = self.pdf.get_y()
            if self.align and self.align[0].upper() == &#34;C&#34;:
                x = self.pdf.w / 2 - w / 2
            self.pdf.image(self.image_map(attrs[&#34;src&#34;]), x, y, w, h, link=self.href)
            self.pdf.set_x(x + w)
            self.pdf.set_y(y + h)
        if tag in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;):
            self.set_style(tag, True)
        if tag == &#34;center&#34;:
            self.align = &#34;Center&#34;

    def handle_endtag(self, tag):
        # Closing tag
        LOGGER.debug(&#34;ENDTAG %s&#34;, tag)
        if tag in (&#34;h1&#34;, &#34;h2&#34;, &#34;h3&#34;, &#34;h4&#34;, &#34;h5&#34;, &#34;h6&#34;):
            self.pdf.ln(self.h)
            self.set_font()
            self.set_text_color()
            self.align = None
        if tag == &#34;pre&#34;:
            # recover last font state, color is ignored as pre doesn&#39;t change it
            face, size, color = self.font_stack.pop()
            self.set_font(face, size)
        if tag == &#34;blockquote&#34;:
            self.set_text_color()
            self.indent -= 1
            self.pdf.ln(3)
        if tag == &#34;strong&#34;:
            tag = &#34;b&#34;
        if tag == &#34;em&#34;:
            tag = &#34;i&#34;
        if tag in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;):
            self.set_style(tag, False)
        if tag == &#34;a&#34;:
            self.href = &#34;&#34;
        if tag == &#34;p&#34;:
            self.pdf.ln(self.h)
            self.align = &#34;&#34;
        if tag in (&#34;ul&#34;, &#34;ol&#34;):
            self.indent -= 1
            self.bullet.pop()
        if tag == &#34;table&#34;:
            if not self.tfooter_out:
                self.output_table_footer()
            self.table = None
            self.th = False
            self.theader = None
            self.tfooter = None
            self.pdf.ln(self.h)
            self.tr_index = None
        if tag == &#34;thead&#34;:
            self.thead = None
            self.tr_index = None
        if tag == &#34;tfoot&#34;:
            self.tfoot = None
            self.tr_index = None
        if tag == &#34;tbody&#34;:
            self.tbody = None
            self.tr_index = None
        if tag == &#34;tr&#34;:
            if self.tfoot is None:
                self.pdf.ln(self.table_h)
            self.tr = None
        if tag in (&#34;td&#34;, &#34;th&#34;):
            if self.th:
                LOGGER.debug(&#34;revert style&#34;)
                self.set_style(&#34;b&#34;, False)  # revert style
            self.table_col_index += int(self.td.get(&#34;colspan&#34;, &#34;1&#34;))
            self.td = None
            self.th = False
        if tag == &#34;font&#34;:
            # recover last font state
            face, size, color = self.font_stack.pop()
            self.font_color = color
            self.set_font(face, size)
            self.set_text_color()
        if tag == &#34;center&#34;:
            self.align = None

    def set_font(self, face=None, size=None):
        if face:
            self.font_face = face
        if size:
            self.font_size = size
            self.h = size / 72 * 25.4
            LOGGER.debug(&#34;H %s&#34;, self.h)
        style = &#34;&#34;.join(s for s in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;) if self.style.get(s))
        self.pdf.set_font(self.font_face or &#34;times&#34;, style, self.font_size or 12)
        self.pdf.set_font_size(self.font_size or 12)

    def set_style(self, tag=None, enable=False):
        # Modify style and select corresponding font
        if tag:
            self.style[tag.lower()] = enable
        style = &#34;&#34;.join(s for s in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;) if self.style.get(s))
        LOGGER.debug(&#34;SET_FONT_STYLE %s&#34;, style)
        self.pdf.set_font(style=style)

    def set_text_color(self, r=None, g=0, b=0):
        if r is None:
            self.pdf.set_text_color(*self.font_color)
        else:
            self.pdf.set_text_color(r, g, b)

    def put_link(self, url, txt):
        # Put a hyperlink
        self.set_text_color(0, 0, 255)
        self.set_style(&#34;u&#34;, True)
        self.pdf.write(self.h, txt, url)
        self.set_style(&#34;u&#34;, False)
        self.set_text_color()

    # Subclasses of _markupbase.ParserBase must implement this:
    def error(self, message):
        raise RuntimeError(message)


class HTMLMixin:
    def write_html(self, text, *args, **kwargs):
        &#34;&#34;&#34;Parse HTML and convert it to PDF&#34;&#34;&#34;
        h2p = HTML2FPDF(self, *args, **kwargs)
        text = html.unescape(text)  # To deal with HTML entities
        h2p.feed(text)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="fpdf.html.hex2dec"><code class="name flex">
<span>def <span class="ident">hex2dec</span></span>(<span>color='#000000')</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def hex2dec(color=&#34;#000000&#34;):
    if not color:
        return None
    r = int(color[1:3], 16)
    g = int(color[3:5], 16)
    b = int(color[5:7], 16)
    return r, g, b</code></pre>
</details>
</dd>
<dt id="fpdf.html.px2mm"><code class="name flex">
<span>def <span class="ident">px2mm</span></span>(<span>px)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def px2mm(px):
    return int(px) * 25.4 / 72</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="fpdf.html.HTML2FPDF"><code class="flex name class">
<span>class <span class="ident">HTML2FPDF</span></span>
<span>(</span><span>pdf, image_map=None, table_line_separators=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Render basic HTML to FPDF</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>pdf</code></strong> :&ensp;<code>FPDF</code></dt>
<dd>an instance of <code><a title="fpdf.FPDF" href="index.html#fpdf.FPDF">FPDF</a></code></dd>
<dt><strong><code>image_map</code></strong> :&ensp;<code>function</code></dt>
<dd>an optional one-argument function that map <img> "src"
to new image URLs</dd>
<dt><strong><code>table_line_separators</code></strong> :&ensp;<code>bool</code></dt>
<dd>enable horizontal line separators in <table></dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class HTML2FPDF(HTMLParser):
    &#34;&#34;&#34;Render basic HTML to FPDF&#34;&#34;&#34;

    def __init__(self, pdf, image_map=None, table_line_separators=False):
        &#34;&#34;&#34;
        Args:
            pdf (FPDF): an instance of `fpdf.FPDF`
            image_map (function): an optional one-argument function that map &lt;img&gt; &#34;src&#34;
                to new image URLs
            table_line_separators (bool): enable horizontal line separators in &lt;table&gt;
        &#34;&#34;&#34;
        super().__init__()
        self.pdf = pdf
        self.image_map = image_map or (lambda src: src)
        self.table_line_separators = table_line_separators
        self.style = dict(b=False, i=False, u=False)
        self.href = &#34;&#34;
        self.align = &#34;&#34;
        self.page_links = {}
        self.font_stack = []
        self.indent = 0
        self.bullet = []
        self.font_size = pdf.font_size_pt
        self.set_font(&#34;times&#34;, self.font_size)
        self.font_color = 0, 0, 0  # initialize font color, r,g,b format
        self.table = None  # table attributes
        self.table_col_width = None  # column (header) widths
        self.table_col_index = None  # current column index
        self.td = None  # inside a &lt;td&gt;, attributes dict
        self.th = None  # inside a &lt;th&gt;, attributes dict
        self.tr = None  # inside a &lt;tr&gt;, attributes dict
        self.thead = None  # inside a &lt;thead&gt;, attributes dict
        self.tfoot = None  # inside a &lt;tfoot&gt;, attributes dict
        self.tr_index = None  # row index
        self.theader = None  # table header cells
        self.tfooter = None  # table footer cells
        self.theader_out = self.tfooter_out = False
        self.hsize = dict(h1=2, h2=1.5, h3=1.17, h4=1, h5=0.83, h6=0.67)

    def width2mm(self, length):
        if length[-1] == &#34;%&#34;:
            total = self.pdf.w - self.pdf.r_margin - self.pdf.l_margin
            if self.table[&#34;width&#34;][-1] == &#34;%&#34;:
                total *= int(self.table[&#34;width&#34;][:-1]) / 100
            return int(length[:-1]) * total / 101
        return int(length) / 6

    def handle_data(self, data):
        if self.td is not None:  # drawing a table?
            if &#34;width&#34; not in self.td and &#34;colspan&#34; not in self.td:
                # pylint: disable=raise-missing-from
                try:
                    l = [self.table_col_width[self.table_col_index]]
                except IndexError:
                    raise ValueError(
                        f&#34;Width not specified for table column {self.table_col_index},&#34;
                        &#34; unable to continue&#34;
                    )
            elif &#34;colspan&#34; in self.td:
                i = self.table_col_index
                colspan = int(self.td[&#34;colspan&#34;])
                l = self.table_col_width[i : i + colspan]
            else:
                l = [self.td.get(&#34;width&#34;, &#34;240&#34;)]
            w = sum(self.width2mm(length) for length in l)
            h = int(self.td.get(&#34;height&#34;, 0)) // 4 or self.h * 1.30
            self.table_h = h
            border = int(self.table.get(&#34;border&#34;, 0))
            if not self.th:
                align = self.td.get(&#34;align&#34;, &#34;L&#34;)[0].upper()
                border = border and &#34;LR&#34;
            else:
                self.set_style(&#34;B&#34;, True)
                border = border or &#34;B&#34;
                align = self.td.get(&#34;align&#34;, &#34;C&#34;)[0].upper()
            bgcolor = hex2dec(self.td.get(&#34;bgcolor&#34;, self.tr.get(&#34;bgcolor&#34;, &#34;&#34;)))
            # parsing table header/footer (drawn later):
            if self.thead is not None:
                self.theader.append(((w, h, data, border, 0, align), bgcolor))
            if self.tfoot is not None:
                self.tfooter.append(((w, h, data, border, 0, align), bgcolor))
            # check if reached end of page, add table footer and header:
            height = h + (self.tfooter and self.tfooter[0][0][1] or 0)
            if self.pdf.y + height &gt; self.pdf.page_break_trigger and not self.th:
                self.output_table_footer()
                self.pdf.add_page(same=True)
                self.theader_out = self.tfooter_out = False
            if self.tfoot is None and self.thead is None:
                if not self.theader_out:
                    self.output_table_header()
                self.box_shadow(w, h, bgcolor)
                LOGGER.debug(&#34;td cell %s %s %s *&#34;, self.pdf.x, w, data)
                self.pdf.cell(w, h, data, border=border, ln=0, align=align)
        elif self.table is not None:
            # ignore anything else than td inside a table
            pass
        elif self.align:
            LOGGER.debug(&#34;cell %s *&#34;, data)
            self.pdf.cell(
                0,
                self.h,
                data,
                border=0,
                ln=1,
                align=self.align[0].upper(),
                link=self.href,
            )
        else:
            data = data.replace(&#34;\n&#34;, &#34; &#34;)
            if self.href:
                self.put_link(self.href, data)
            else:
                LOGGER.debug(&#34;write %s *&#34;)
                self.pdf.write(self.h, data)

    def box_shadow(self, w, h, bgcolor):
        LOGGER.debug(&#34;box_shadow %s %s %s&#34;, w, h, bgcolor)
        if bgcolor:
            fill_color = self.pdf.fill_color
            self.pdf.set_fill_color(*bgcolor)
            self.pdf.rect(self.pdf.x, self.pdf.y, w, h, &#34;F&#34;)
            self.pdf.fill_color = fill_color

    def output_table_header(self):
        if self.theader:
            b = self.style.get(&#34;b&#34;)
            self.pdf.set_x(self.table_offset)
            self.set_style(&#34;b&#34;, True)
            for cell, bgcolor in self.theader:
                self.box_shadow(cell[0], cell[1], bgcolor)
                self.pdf.cell(*cell)  # includes the border
            self.set_style(&#34;b&#34;, b)
            self.pdf.ln(self.theader[0][0][1])
            self.pdf.set_x(self.table_offset)
            # self.pdf.set_x(prev_x)
        self.theader_out = True

    def output_table_footer(self):
        if self.tfooter:
            x = self.pdf.x
            self.pdf.set_x(self.table_offset)
            for cell, bgcolor in self.tfooter:
                self.box_shadow(cell[0], cell[1], bgcolor)
                self.pdf.cell(*cell)
            self.pdf.ln(self.tfooter[0][0][1])
            self.pdf.set_x(x)
        if self.table.get(&#34;border&#34;):
            self.output_table_sep()
        self.tfooter_out = True

    def output_table_sep(self):
        x1 = self.pdf.x
        y1 = self.pdf.y
        width = sum(self.width2mm(length) for length in self.table_col_width)
        self.pdf.line(x1, y1, x1 + width, y1)

    def handle_starttag(self, tag, attrs):
        attrs = dict(attrs)
        LOGGER.debug(&#34;STARTTAG %s %s&#34;)
        if tag in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;):
            self.set_style(tag, True)
        if tag == &#34;a&#34;:
            self.href = attrs[&#34;href&#34;]
        if tag == &#34;br&#34;:
            self.pdf.ln(self.h)
        if tag == &#34;p&#34;:
            self.pdf.ln(self.h)
            if attrs:
                self.align = attrs.get(&#34;align&#34;)
        if tag in self.hsize:
            k = self.hsize[tag]
            self.pdf.ln(5 * k)
            self.pdf.set_text_color(150, 0, 0)
            self.pdf.set_font_size(12 * k)
            if attrs:
                self.align = attrs.get(&#34;align&#34;)
        if tag == &#34;hr&#34;:
            self.pdf.add_page(same=True)
        if tag == &#34;pre&#34;:
            self.font_stack.append((self.font_face, self.font_size, self.font_color))
            self.set_font(&#34;courier&#34;, 11)
        if tag == &#34;blockquote&#34;:
            self.pdf.set_text_color(100, 0, 45)
            self.indent += 1
            self.pdf.ln(3)
        if tag == &#34;ul&#34;:
            self.indent += 1
            self.bullet.append(&#34;\x95&#34;)
        if tag == &#34;ol&#34;:
            self.indent += 1
            self.bullet.append(0)
        if tag == &#34;li&#34;:
            self.pdf.ln(self.h + 2)
            self.pdf.set_text_color(190, 0, 0)
            bullet = self.bullet[self.indent - 1]
            if not isinstance(bullet, str):
                bullet += 1
                self.bullet[self.indent - 1] = bullet
                bullet = f&#34;{bullet}. &#34;
            self.pdf.write(self.h, f&#34;{&#39; &#39; * 5 * self.indent}{bullet} &#34;)
            self.set_text_color()
        if tag == &#34;font&#34;:
            # save previous font state:
            self.font_stack.append((self.font_face, self.font_size, self.font_color))
            if &#34;color&#34; in attrs:
                color = hex2dec(attrs[&#34;color&#34;])
                self.font_color = color
            if &#34;face&#34; in attrs:
                face = attrs.get(&#34;face&#34;).lower()
                try:
                    self.pdf.set_font(face)
                    self.font_face = face
                except RuntimeError:
                    pass  # font not found, ignore
            if &#34;size&#34; in attrs:
                self.font_size = int(attrs.get(&#34;size&#34;))
            self.set_font()
            self.set_text_color()
        if tag == &#34;table&#34;:
            self.table = {k.lower(): v for k, v in attrs.items()}
            if &#34;width&#34; not in self.table:
                self.table[&#34;width&#34;] = &#34;100%&#34;
            if self.table[&#34;width&#34;][-1] == &#34;%&#34;:
                w = self.pdf.w - self.pdf.r_margin - self.pdf.l_margin
                w *= int(self.table[&#34;width&#34;][:-1]) / 100
                self.table_offset = (self.pdf.w - w) / 2
            self.table_col_width = []
            self.theader_out = self.tfooter_out = False
            self.theader = []
            self.tfooter = []
            self.thead = None
            self.tfoot = None
            self.table_h = 0
            self.pdf.ln()
        if tag == &#34;tr&#34;:
            self.tr_index = 0 if self.tr_index is None else (self.tr_index + 1)
            self.tr = {k.lower(): v for k, v in attrs.items()}
            self.table_col_index = 0
            self.pdf.set_x(self.table_offset)
            # Adding an horizontal line separator between rows:
            if self.table_line_separators and self.tr_index &gt; 0:
                self.output_table_sep()
        if tag == &#34;td&#34;:
            self.td = {k.lower(): v for k, v in attrs.items()}
        if tag == &#34;th&#34;:
            self.td = {k.lower(): v for k, v in attrs.items()}
            self.th = True
            if &#34;width&#34; in self.td:
                self.table_col_width.append(self.td[&#34;width&#34;])
        if tag == &#34;thead&#34;:
            self.thead = {}
        if tag == &#34;tfoot&#34;:
            self.tfoot = {}
        if tag == &#34;img&#34; and &#34;src&#34; in attrs:
            w = px2mm(attrs.get(&#34;width&#34;, 0))
            h = px2mm(attrs.get(&#34;height&#34;, 0))
            if self.pdf.y + h &gt; self.pdf.page_break_trigger:
                self.pdf.add_page(same=True)
            x = self.pdf.get_x()
            y = self.pdf.get_y()
            if self.align and self.align[0].upper() == &#34;C&#34;:
                x = self.pdf.w / 2 - w / 2
            self.pdf.image(self.image_map(attrs[&#34;src&#34;]), x, y, w, h, link=self.href)
            self.pdf.set_x(x + w)
            self.pdf.set_y(y + h)
        if tag in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;):
            self.set_style(tag, True)
        if tag == &#34;center&#34;:
            self.align = &#34;Center&#34;

    def handle_endtag(self, tag):
        # Closing tag
        LOGGER.debug(&#34;ENDTAG %s&#34;, tag)
        if tag in (&#34;h1&#34;, &#34;h2&#34;, &#34;h3&#34;, &#34;h4&#34;, &#34;h5&#34;, &#34;h6&#34;):
            self.pdf.ln(self.h)
            self.set_font()
            self.set_text_color()
            self.align = None
        if tag == &#34;pre&#34;:
            # recover last font state, color is ignored as pre doesn&#39;t change it
            face, size, color = self.font_stack.pop()
            self.set_font(face, size)
        if tag == &#34;blockquote&#34;:
            self.set_text_color()
            self.indent -= 1
            self.pdf.ln(3)
        if tag == &#34;strong&#34;:
            tag = &#34;b&#34;
        if tag == &#34;em&#34;:
            tag = &#34;i&#34;
        if tag in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;):
            self.set_style(tag, False)
        if tag == &#34;a&#34;:
            self.href = &#34;&#34;
        if tag == &#34;p&#34;:
            self.pdf.ln(self.h)
            self.align = &#34;&#34;
        if tag in (&#34;ul&#34;, &#34;ol&#34;):
            self.indent -= 1
            self.bullet.pop()
        if tag == &#34;table&#34;:
            if not self.tfooter_out:
                self.output_table_footer()
            self.table = None
            self.th = False
            self.theader = None
            self.tfooter = None
            self.pdf.ln(self.h)
            self.tr_index = None
        if tag == &#34;thead&#34;:
            self.thead = None
            self.tr_index = None
        if tag == &#34;tfoot&#34;:
            self.tfoot = None
            self.tr_index = None
        if tag == &#34;tbody&#34;:
            self.tbody = None
            self.tr_index = None
        if tag == &#34;tr&#34;:
            if self.tfoot is None:
                self.pdf.ln(self.table_h)
            self.tr = None
        if tag in (&#34;td&#34;, &#34;th&#34;):
            if self.th:
                LOGGER.debug(&#34;revert style&#34;)
                self.set_style(&#34;b&#34;, False)  # revert style
            self.table_col_index += int(self.td.get(&#34;colspan&#34;, &#34;1&#34;))
            self.td = None
            self.th = False
        if tag == &#34;font&#34;:
            # recover last font state
            face, size, color = self.font_stack.pop()
            self.font_color = color
            self.set_font(face, size)
            self.set_text_color()
        if tag == &#34;center&#34;:
            self.align = None

    def set_font(self, face=None, size=None):
        if face:
            self.font_face = face
        if size:
            self.font_size = size
            self.h = size / 72 * 25.4
            LOGGER.debug(&#34;H %s&#34;, self.h)
        style = &#34;&#34;.join(s for s in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;) if self.style.get(s))
        self.pdf.set_font(self.font_face or &#34;times&#34;, style, self.font_size or 12)
        self.pdf.set_font_size(self.font_size or 12)

    def set_style(self, tag=None, enable=False):
        # Modify style and select corresponding font
        if tag:
            self.style[tag.lower()] = enable
        style = &#34;&#34;.join(s for s in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;) if self.style.get(s))
        LOGGER.debug(&#34;SET_FONT_STYLE %s&#34;, style)
        self.pdf.set_font(style=style)

    def set_text_color(self, r=None, g=0, b=0):
        if r is None:
            self.pdf.set_text_color(*self.font_color)
        else:
            self.pdf.set_text_color(r, g, b)

    def put_link(self, url, txt):
        # Put a hyperlink
        self.set_text_color(0, 0, 255)
        self.set_style(&#34;u&#34;, True)
        self.pdf.write(self.h, txt, url)
        self.set_style(&#34;u&#34;, False)
        self.set_text_color()

    # Subclasses of _markupbase.ParserBase must implement this:
    def error(self, message):
        raise RuntimeError(message)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>html.parser.HTMLParser</li>
<li>_markupbase.ParserBase</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="fpdf.html.HTML2FPDF.box_shadow"><code class="name flex">
<span>def <span class="ident">box_shadow</span></span>(<span>self, w, h, bgcolor)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def box_shadow(self, w, h, bgcolor):
    LOGGER.debug(&#34;box_shadow %s %s %s&#34;, w, h, bgcolor)
    if bgcolor:
        fill_color = self.pdf.fill_color
        self.pdf.set_fill_color(*bgcolor)
        self.pdf.rect(self.pdf.x, self.pdf.y, w, h, &#34;F&#34;)
        self.pdf.fill_color = fill_color</code></pre>
</details>
</dd>
<dt id="fpdf.html.HTML2FPDF.error"><code class="name flex">
<span>def <span class="ident">error</span></span>(<span>self, message)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def error(self, message):
    raise RuntimeError(message)</code></pre>
</details>
</dd>
<dt id="fpdf.html.HTML2FPDF.handle_data"><code class="name flex">
<span>def <span class="ident">handle_data</span></span>(<span>self, data)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def handle_data(self, data):
    if self.td is not None:  # drawing a table?
        if &#34;width&#34; not in self.td and &#34;colspan&#34; not in self.td:
            # pylint: disable=raise-missing-from
            try:
                l = [self.table_col_width[self.table_col_index]]
            except IndexError:
                raise ValueError(
                    f&#34;Width not specified for table column {self.table_col_index},&#34;
                    &#34; unable to continue&#34;
                )
        elif &#34;colspan&#34; in self.td:
            i = self.table_col_index
            colspan = int(self.td[&#34;colspan&#34;])
            l = self.table_col_width[i : i + colspan]
        else:
            l = [self.td.get(&#34;width&#34;, &#34;240&#34;)]
        w = sum(self.width2mm(length) for length in l)
        h = int(self.td.get(&#34;height&#34;, 0)) // 4 or self.h * 1.30
        self.table_h = h
        border = int(self.table.get(&#34;border&#34;, 0))
        if not self.th:
            align = self.td.get(&#34;align&#34;, &#34;L&#34;)[0].upper()
            border = border and &#34;LR&#34;
        else:
            self.set_style(&#34;B&#34;, True)
            border = border or &#34;B&#34;
            align = self.td.get(&#34;align&#34;, &#34;C&#34;)[0].upper()
        bgcolor = hex2dec(self.td.get(&#34;bgcolor&#34;, self.tr.get(&#34;bgcolor&#34;, &#34;&#34;)))
        # parsing table header/footer (drawn later):
        if self.thead is not None:
            self.theader.append(((w, h, data, border, 0, align), bgcolor))
        if self.tfoot is not None:
            self.tfooter.append(((w, h, data, border, 0, align), bgcolor))
        # check if reached end of page, add table footer and header:
        height = h + (self.tfooter and self.tfooter[0][0][1] or 0)
        if self.pdf.y + height &gt; self.pdf.page_break_trigger and not self.th:
            self.output_table_footer()
            self.pdf.add_page(same=True)
            self.theader_out = self.tfooter_out = False
        if self.tfoot is None and self.thead is None:
            if not self.theader_out:
                self.output_table_header()
            self.box_shadow(w, h, bgcolor)
            LOGGER.debug(&#34;td cell %s %s %s *&#34;, self.pdf.x, w, data)
            self.pdf.cell(w, h, data, border=border, ln=0, align=align)
    elif self.table is not None:
        # ignore anything else than td inside a table
        pass
    elif self.align:
        LOGGER.debug(&#34;cell %s *&#34;, data)
        self.pdf.cell(
            0,
            self.h,
            data,
            border=0,
            ln=1,
            align=self.align[0].upper(),
            link=self.href,
        )
    else:
        data = data.replace(&#34;\n&#34;, &#34; &#34;)
        if self.href:
            self.put_link(self.href, data)
        else:
            LOGGER.debug(&#34;write %s *&#34;)
            self.pdf.write(self.h, data)</code></pre>
</details>
</dd>
<dt id="fpdf.html.HTML2FPDF.handle_endtag"><code class="name flex">
<span>def <span class="ident">handle_endtag</span></span>(<span>self, tag)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def handle_endtag(self, tag):
    # Closing tag
    LOGGER.debug(&#34;ENDTAG %s&#34;, tag)
    if tag in (&#34;h1&#34;, &#34;h2&#34;, &#34;h3&#34;, &#34;h4&#34;, &#34;h5&#34;, &#34;h6&#34;):
        self.pdf.ln(self.h)
        self.set_font()
        self.set_text_color()
        self.align = None
    if tag == &#34;pre&#34;:
        # recover last font state, color is ignored as pre doesn&#39;t change it
        face, size, color = self.font_stack.pop()
        self.set_font(face, size)
    if tag == &#34;blockquote&#34;:
        self.set_text_color()
        self.indent -= 1
        self.pdf.ln(3)
    if tag == &#34;strong&#34;:
        tag = &#34;b&#34;
    if tag == &#34;em&#34;:
        tag = &#34;i&#34;
    if tag in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;):
        self.set_style(tag, False)
    if tag == &#34;a&#34;:
        self.href = &#34;&#34;
    if tag == &#34;p&#34;:
        self.pdf.ln(self.h)
        self.align = &#34;&#34;
    if tag in (&#34;ul&#34;, &#34;ol&#34;):
        self.indent -= 1
        self.bullet.pop()
    if tag == &#34;table&#34;:
        if not self.tfooter_out:
            self.output_table_footer()
        self.table = None
        self.th = False
        self.theader = None
        self.tfooter = None
        self.pdf.ln(self.h)
        self.tr_index = None
    if tag == &#34;thead&#34;:
        self.thead = None
        self.tr_index = None
    if tag == &#34;tfoot&#34;:
        self.tfoot = None
        self.tr_index = None
    if tag == &#34;tbody&#34;:
        self.tbody = None
        self.tr_index = None
    if tag == &#34;tr&#34;:
        if self.tfoot is None:
            self.pdf.ln(self.table_h)
        self.tr = None
    if tag in (&#34;td&#34;, &#34;th&#34;):
        if self.th:
            LOGGER.debug(&#34;revert style&#34;)
            self.set_style(&#34;b&#34;, False)  # revert style
        self.table_col_index += int(self.td.get(&#34;colspan&#34;, &#34;1&#34;))
        self.td = None
        self.th = False
    if tag == &#34;font&#34;:
        # recover last font state
        face, size, color = self.font_stack.pop()
        self.font_color = color
        self.set_font(face, size)
        self.set_text_color()
    if tag == &#34;center&#34;:
        self.align = None</code></pre>
</details>
</dd>
<dt id="fpdf.html.HTML2FPDF.handle_starttag"><code class="name flex">
<span>def <span class="ident">handle_starttag</span></span>(<span>self, tag, attrs)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def handle_starttag(self, tag, attrs):
    attrs = dict(attrs)
    LOGGER.debug(&#34;STARTTAG %s %s&#34;)
    if tag in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;):
        self.set_style(tag, True)
    if tag == &#34;a&#34;:
        self.href = attrs[&#34;href&#34;]
    if tag == &#34;br&#34;:
        self.pdf.ln(self.h)
    if tag == &#34;p&#34;:
        self.pdf.ln(self.h)
        if attrs:
            self.align = attrs.get(&#34;align&#34;)
    if tag in self.hsize:
        k = self.hsize[tag]
        self.pdf.ln(5 * k)
        self.pdf.set_text_color(150, 0, 0)
        self.pdf.set_font_size(12 * k)
        if attrs:
            self.align = attrs.get(&#34;align&#34;)
    if tag == &#34;hr&#34;:
        self.pdf.add_page(same=True)
    if tag == &#34;pre&#34;:
        self.font_stack.append((self.font_face, self.font_size, self.font_color))
        self.set_font(&#34;courier&#34;, 11)
    if tag == &#34;blockquote&#34;:
        self.pdf.set_text_color(100, 0, 45)
        self.indent += 1
        self.pdf.ln(3)
    if tag == &#34;ul&#34;:
        self.indent += 1
        self.bullet.append(&#34;\x95&#34;)
    if tag == &#34;ol&#34;:
        self.indent += 1
        self.bullet.append(0)
    if tag == &#34;li&#34;:
        self.pdf.ln(self.h + 2)
        self.pdf.set_text_color(190, 0, 0)
        bullet = self.bullet[self.indent - 1]
        if not isinstance(bullet, str):
            bullet += 1
            self.bullet[self.indent - 1] = bullet
            bullet = f&#34;{bullet}. &#34;
        self.pdf.write(self.h, f&#34;{&#39; &#39; * 5 * self.indent}{bullet} &#34;)
        self.set_text_color()
    if tag == &#34;font&#34;:
        # save previous font state:
        self.font_stack.append((self.font_face, self.font_size, self.font_color))
        if &#34;color&#34; in attrs:
            color = hex2dec(attrs[&#34;color&#34;])
            self.font_color = color
        if &#34;face&#34; in attrs:
            face = attrs.get(&#34;face&#34;).lower()
            try:
                self.pdf.set_font(face)
                self.font_face = face
            except RuntimeError:
                pass  # font not found, ignore
        if &#34;size&#34; in attrs:
            self.font_size = int(attrs.get(&#34;size&#34;))
        self.set_font()
        self.set_text_color()
    if tag == &#34;table&#34;:
        self.table = {k.lower(): v for k, v in attrs.items()}
        if &#34;width&#34; not in self.table:
            self.table[&#34;width&#34;] = &#34;100%&#34;
        if self.table[&#34;width&#34;][-1] == &#34;%&#34;:
            w = self.pdf.w - self.pdf.r_margin - self.pdf.l_margin
            w *= int(self.table[&#34;width&#34;][:-1]) / 100
            self.table_offset = (self.pdf.w - w) / 2
        self.table_col_width = []
        self.theader_out = self.tfooter_out = False
        self.theader = []
        self.tfooter = []
        self.thead = None
        self.tfoot = None
        self.table_h = 0
        self.pdf.ln()
    if tag == &#34;tr&#34;:
        self.tr_index = 0 if self.tr_index is None else (self.tr_index + 1)
        self.tr = {k.lower(): v for k, v in attrs.items()}
        self.table_col_index = 0
        self.pdf.set_x(self.table_offset)
        # Adding an horizontal line separator between rows:
        if self.table_line_separators and self.tr_index &gt; 0:
            self.output_table_sep()
    if tag == &#34;td&#34;:
        self.td = {k.lower(): v for k, v in attrs.items()}
    if tag == &#34;th&#34;:
        self.td = {k.lower(): v for k, v in attrs.items()}
        self.th = True
        if &#34;width&#34; in self.td:
            self.table_col_width.append(self.td[&#34;width&#34;])
    if tag == &#34;thead&#34;:
        self.thead = {}
    if tag == &#34;tfoot&#34;:
        self.tfoot = {}
    if tag == &#34;img&#34; and &#34;src&#34; in attrs:
        w = px2mm(attrs.get(&#34;width&#34;, 0))
        h = px2mm(attrs.get(&#34;height&#34;, 0))
        if self.pdf.y + h &gt; self.pdf.page_break_trigger:
            self.pdf.add_page(same=True)
        x = self.pdf.get_x()
        y = self.pdf.get_y()
        if self.align and self.align[0].upper() == &#34;C&#34;:
            x = self.pdf.w / 2 - w / 2
        self.pdf.image(self.image_map(attrs[&#34;src&#34;]), x, y, w, h, link=self.href)
        self.pdf.set_x(x + w)
        self.pdf.set_y(y + h)
    if tag in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;):
        self.set_style(tag, True)
    if tag == &#34;center&#34;:
        self.align = &#34;Center&#34;</code></pre>
</details>
</dd>
<dt id="fpdf.html.HTML2FPDF.output_table_footer"><code class="name flex">
<span>def <span class="ident">output_table_footer</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def output_table_footer(self):
    if self.tfooter:
        x = self.pdf.x
        self.pdf.set_x(self.table_offset)
        for cell, bgcolor in self.tfooter:
            self.box_shadow(cell[0], cell[1], bgcolor)
            self.pdf.cell(*cell)
        self.pdf.ln(self.tfooter[0][0][1])
        self.pdf.set_x(x)
    if self.table.get(&#34;border&#34;):
        self.output_table_sep()
    self.tfooter_out = True</code></pre>
</details>
</dd>
<dt id="fpdf.html.HTML2FPDF.output_table_header"><code class="name flex">
<span>def <span class="ident">output_table_header</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def output_table_header(self):
    if self.theader:
        b = self.style.get(&#34;b&#34;)
        self.pdf.set_x(self.table_offset)
        self.set_style(&#34;b&#34;, True)
        for cell, bgcolor in self.theader:
            self.box_shadow(cell[0], cell[1], bgcolor)
            self.pdf.cell(*cell)  # includes the border
        self.set_style(&#34;b&#34;, b)
        self.pdf.ln(self.theader[0][0][1])
        self.pdf.set_x(self.table_offset)
        # self.pdf.set_x(prev_x)
    self.theader_out = True</code></pre>
</details>
</dd>
<dt id="fpdf.html.HTML2FPDF.output_table_sep"><code class="name flex">
<span>def <span class="ident">output_table_sep</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def output_table_sep(self):
    x1 = self.pdf.x
    y1 = self.pdf.y
    width = sum(self.width2mm(length) for length in self.table_col_width)
    self.pdf.line(x1, y1, x1 + width, y1)</code></pre>
</details>
</dd>
<dt id="fpdf.html.HTML2FPDF.put_link"><code class="name flex">
<span>def <span class="ident">put_link</span></span>(<span>self, url, txt)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_link(self, url, txt):
    # Put a hyperlink
    self.set_text_color(0, 0, 255)
    self.set_style(&#34;u&#34;, True)
    self.pdf.write(self.h, txt, url)
    self.set_style(&#34;u&#34;, False)
    self.set_text_color()</code></pre>
</details>
</dd>
<dt id="fpdf.html.HTML2FPDF.set_font"><code class="name flex">
<span>def <span class="ident">set_font</span></span>(<span>self, face=None, size=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_font(self, face=None, size=None):
    if face:
        self.font_face = face
    if size:
        self.font_size = size
        self.h = size / 72 * 25.4
        LOGGER.debug(&#34;H %s&#34;, self.h)
    style = &#34;&#34;.join(s for s in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;) if self.style.get(s))
    self.pdf.set_font(self.font_face or &#34;times&#34;, style, self.font_size or 12)
    self.pdf.set_font_size(self.font_size or 12)</code></pre>
</details>
</dd>
<dt id="fpdf.html.HTML2FPDF.set_style"><code class="name flex">
<span>def <span class="ident">set_style</span></span>(<span>self, tag=None, enable=False)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_style(self, tag=None, enable=False):
    # Modify style and select corresponding font
    if tag:
        self.style[tag.lower()] = enable
    style = &#34;&#34;.join(s for s in (&#34;b&#34;, &#34;i&#34;, &#34;u&#34;) if self.style.get(s))
    LOGGER.debug(&#34;SET_FONT_STYLE %s&#34;, style)
    self.pdf.set_font(style=style)</code></pre>
</details>
</dd>
<dt id="fpdf.html.HTML2FPDF.set_text_color"><code class="name flex">
<span>def <span class="ident">set_text_color</span></span>(<span>self, r=None, g=0, b=0)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_text_color(self, r=None, g=0, b=0):
    if r is None:
        self.pdf.set_text_color(*self.font_color)
    else:
        self.pdf.set_text_color(r, g, b)</code></pre>
</details>
</dd>
<dt id="fpdf.html.HTML2FPDF.width2mm"><code class="name flex">
<span>def <span class="ident">width2mm</span></span>(<span>self, length)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def width2mm(self, length):
    if length[-1] == &#34;%&#34;:
        total = self.pdf.w - self.pdf.r_margin - self.pdf.l_margin
        if self.table[&#34;width&#34;][-1] == &#34;%&#34;:
            total *= int(self.table[&#34;width&#34;][:-1]) / 100
        return int(length[:-1]) * total / 101
    return int(length) / 6</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="fpdf.html.HTMLMixin"><code class="flex name class">
<span>class <span class="ident">HTMLMixin</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class HTMLMixin:
    def write_html(self, text, *args, **kwargs):
        &#34;&#34;&#34;Parse HTML and convert it to PDF&#34;&#34;&#34;
        h2p = HTML2FPDF(self, *args, **kwargs)
        text = html.unescape(text)  # To deal with HTML entities
        h2p.feed(text)</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="fpdf.html.HTMLMixin.write_html"><code class="name flex">
<span>def <span class="ident">write_html</span></span>(<span>self, text, *args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Parse HTML and convert it to PDF</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def write_html(self, text, *args, **kwargs):
    &#34;&#34;&#34;Parse HTML and convert it to PDF&#34;&#34;&#34;
    h2p = HTML2FPDF(self, *args, **kwargs)
    text = html.unescape(text)  # To deal with HTML entities
    h2p.feed(text)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="fpdf" href="index.html">fpdf</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="fpdf.html.hex2dec" href="#fpdf.html.hex2dec">hex2dec</a></code></li>
<li><code><a title="fpdf.html.px2mm" href="#fpdf.html.px2mm">px2mm</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="fpdf.html.HTML2FPDF" href="#fpdf.html.HTML2FPDF">HTML2FPDF</a></code></h4>
<ul class="two-column">
<li><code><a title="fpdf.html.HTML2FPDF.box_shadow" href="#fpdf.html.HTML2FPDF.box_shadow">box_shadow</a></code></li>
<li><code><a title="fpdf.html.HTML2FPDF.error" href="#fpdf.html.HTML2FPDF.error">error</a></code></li>
<li><code><a title="fpdf.html.HTML2FPDF.handle_data" href="#fpdf.html.HTML2FPDF.handle_data">handle_data</a></code></li>
<li><code><a title="fpdf.html.HTML2FPDF.handle_endtag" href="#fpdf.html.HTML2FPDF.handle_endtag">handle_endtag</a></code></li>
<li><code><a title="fpdf.html.HTML2FPDF.handle_starttag" href="#fpdf.html.HTML2FPDF.handle_starttag">handle_starttag</a></code></li>
<li><code><a title="fpdf.html.HTML2FPDF.output_table_footer" href="#fpdf.html.HTML2FPDF.output_table_footer">output_table_footer</a></code></li>
<li><code><a title="fpdf.html.HTML2FPDF.output_table_header" href="#fpdf.html.HTML2FPDF.output_table_header">output_table_header</a></code></li>
<li><code><a title="fpdf.html.HTML2FPDF.output_table_sep" href="#fpdf.html.HTML2FPDF.output_table_sep">output_table_sep</a></code></li>
<li><code><a title="fpdf.html.HTML2FPDF.put_link" href="#fpdf.html.HTML2FPDF.put_link">put_link</a></code></li>
<li><code><a title="fpdf.html.HTML2FPDF.set_font" href="#fpdf.html.HTML2FPDF.set_font">set_font</a></code></li>
<li><code><a title="fpdf.html.HTML2FPDF.set_style" href="#fpdf.html.HTML2FPDF.set_style">set_style</a></code></li>
<li><code><a title="fpdf.html.HTML2FPDF.set_text_color" href="#fpdf.html.HTML2FPDF.set_text_color">set_text_color</a></code></li>
<li><code><a title="fpdf.html.HTML2FPDF.width2mm" href="#fpdf.html.HTML2FPDF.width2mm">width2mm</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="fpdf.html.HTMLMixin" href="#fpdf.html.HTMLMixin">HTMLMixin</a></code></h4>
<ul class="">
<li><code><a title="fpdf.html.HTMLMixin.write_html" href="#fpdf.html.HTMLMixin.write_html">write_html</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>