
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="fpdf2 - minimalist PDF creation library for Python">
      
      
      
      
        <link rel="canonical" href="https://pyfpdf.github.io/fpdf2/Web2Py.html">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.2">
    
    
      
        <title>Web2Py - fpdf2</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.1655a90d.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.7fa14f5b.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  
  
    
  
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fpdf2 - Web2Py" />
  <meta property="og:description" content="fpdf2 - minimalist PDF creation library for Python" />
  <meta property="og:url" content="https://pyfpdf.github.io/fpdf2/Web2Py.html" />
  <meta property="og:image" content="https://pyfpdf.github.io/fpdf2/fpdf2-logo.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="500" />
  <meta property="og:image:height" content="500" />

  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://pyfpdf.github.io/fpdf2/" title="fpdf2" class="md-header__button md-logo" aria-label="fpdf2">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            fpdf2
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Web2Py
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/PyFPDF/fpdf2/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://pyfpdf.github.io/fpdf2/" title="fpdf2" class="md-nav__button md-logo" aria-label="fpdf2">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    fpdf2
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/PyFPDF/fpdf2/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Project Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Tutorial.html" class="md-nav__link">
        Tutorial
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="ExistingPDFs.html" class="md-nav__link">
        Existing PDFs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="HTML.html" class="md-nav__link">
        HTML
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Links.html" class="md-nav__link">
        Links
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Tables.html" class="md-nav__link">
        Tables
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        Layout
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Layout" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Layout
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="PageFormatAndOrientation.html" class="md-nav__link">
        Page format and orientation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Margins.html" class="md-nav__link">
        Margins
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="PageBreaks.html" class="md-nav__link">
        Page breaks
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="TextStyling.html" class="md-nav__link">
        Text styling
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Shapes.html" class="md-nav__link">
        Shapes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Barcodes.html" class="md-nav__link">
        Barcodes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Metadata.html" class="md-nav__link">
        Metadata
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Logging.html" class="md-nav__link">
        Logging
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Templates.html" class="md-nav__link">
        Templates
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Unicode.html" class="md-nav__link">
        Unicode
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
      <a href="Web2Py.html" class="md-nav__link md-nav__link--active">
        Web2Py
      </a>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://pyfpdf.github.io/fpdf2/fpdf/" class="md-nav__link">
        API
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" >
      
      <label class="md-nav__link" for="__nav_17">
        ReferenceManual
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="ReferenceManual" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          ReferenceManual
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="ReferenceManual.html" class="md-nav__link">
        Reference Manual
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/accept_page_break.html" class="md-nav__link">
        accept_page_break
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/add_font.html" class="md-nav__link">
        add_font
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/add_link.html" class="md-nav__link">
        add_link
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/add_page.html" class="md-nav__link">
        add_page
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/alias_nb_pages.html" class="md-nav__link">
        alias_nb_pages
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/cell.html" class="md-nav__link">
        cell
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/close.html" class="md-nav__link">
        close
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/dashed_line.html" class="md-nav__link">
        dashed_line
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/ellipse.html" class="md-nav__link">
        ellipse
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/error.html" class="md-nav__link">
        error
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/FPDF.html" class="md-nav__link">
        FPDF
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/footer.html" class="md-nav__link">
        footer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/get_string_width.html" class="md-nav__link">
        get_string_width
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/get_x.html" class="md-nav__link">
        get_x
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/get_y.html" class="md-nav__link">
        get_y
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/header.html" class="md-nav__link">
        header
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/image.html" class="md-nav__link">
        image
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/load_resource.html" class="md-nav__link">
        load_resource
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/line.html" class="md-nav__link">
        line
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/link.html" class="md-nav__link">
        link
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/ln.html" class="md-nav__link">
        ln
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/multi_cell.html" class="md-nav__link">
        multi_cell
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/open.html" class="md-nav__link">
        open
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/output.html" class="md-nav__link">
        output
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/page_no.html" class="md-nav__link">
        page_no
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/rect.html" class="md-nav__link">
        rect
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_author.html" class="md-nav__link">
        set_author
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/rotate.html" class="md-nav__link">
        rotate
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/rotation.html" class="md-nav__link">
        rotation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_auto_page_break.html" class="md-nav__link">
        set_auto_page_break
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_compression.html" class="md-nav__link">
        set_compression
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_creator.html" class="md-nav__link">
        set_creator
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_doc_option.html" class="md-nav__link">
        set_doc_option
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_display_mode.html" class="md-nav__link">
        set_display_mode
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_draw_color.html" class="md-nav__link">
        set_draw_color
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_fill_color.html" class="md-nav__link">
        set_fill_color
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_font.html" class="md-nav__link">
        set_font
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_font_size.html" class="md-nav__link">
        set_font_size
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_keywords.html" class="md-nav__link">
        set_keywords
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_left_margin.html" class="md-nav__link">
        set_left_margin
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_line_width.html" class="md-nav__link">
        set_line_width
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_link.html" class="md-nav__link">
        set_link
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_margins.html" class="md-nav__link">
        set_margins
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_right_margin.html" class="md-nav__link">
        set_right_margin
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_stretching.html" class="md-nav__link">
        set_stretching
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_subject.html" class="md-nav__link">
        set_subject
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_text_color.html" class="md-nav__link">
        set_text_color
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_title.html" class="md-nav__link">
        set_title
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_top_margin.html" class="md-nav__link">
        set_top_margin
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_x.html" class="md-nav__link">
        set_x
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_xy.html" class="md-nav__link">
        set_xy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/set_y.html" class="md-nav__link">
        set_y
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/text.html" class="md-nav__link">
        text
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/write.html" class="md-nav__link">
        write
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="reference/write_html.html" class="md-nav__link">
        write_html
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Development.html" class="md-nav__link">
        Development
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="FAQ.html" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/PyFPDF/fpdf2/edit/master/docs/Web2Py.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="introduction">Introduction</h1>
<p>If you use <a href="http://www.web2py.com">web2py</a>, you can make complex reports that can be viewed in a browser, or downloaded as PDF (taking advantage of web2py HTML helper objects to easily diagram a report). See <a href="reference/write_html.html">write_html</a> for more information, supported tags and attributes, etc.</p>
<p>Also, using web2py DAL, you can easily set up a templating engine for PDF documents. See <a href="Templates.html">Templates</a> for more information.</p>
<p>The following examples are packaged in a ready to run application:
<a href="http://pyfpdf.googlecode.com/files/web2py.app.fpdf.w2p">web2py.app.fpdf.w2p</a>.</p>
<p>PyFPDF is included in <a href="http://www.web2py.com/">web2py</a> since release <a href="http://www.web2py.com/examples/default/download">1.85.2</a>.</p>
<p>Also, you can put the content of the <code>fpdf/</code> directory in this repository into the <code>web2py/gluon/contrib</code> folder.</p>
<p><strong>Note about images</strong>: these sample images are small so they may look like low quality ones. For better results, use bigger images: more DPI (screen is often 72/96DPI, printers are often 300/600DPI). As a rule of thumb, use at least half of the image size when rendering to PDF, ie. if an image is 500x200px, use 250x100px as width and height attributes of the IMG tag.</p>
<h1 id="sample-report">Sample Report</h1>
<p>You could make a "professional looking" bussiness report just using web2py HTML helpers, mixin headers, logos, charts, text and tables.</p>
<p>The main advantage of this method is that the same report can be rendered in a HTML view, or can be downloaded as PDF, with a minimal effort:</p>
<p>Sample: <a href="http://pyfpdf.googlecode.com/files/report.pdf">report.pdf</a></p>
<p>Updated Live Demo (HTML and PDF version):</p>
<ul>
<li><a href="http://www.web2py.com.ar/fpdf/default/report">http://www.web2py.com.ar/fpdf/default/report</a></li>
<li><a href="http://www.web2py.com.ar/fpdf/default/report.pdf">http://www.web2py.com.ar/fpdf/default/report.pdf</a></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">report</span><span class="p">():</span>
    <span class="n">response</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;web2py sample report&quot;</span>

    <span class="c1"># include a google chart (download it dynamically!)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://chart.apis.google.com/chart?cht=p3&amp;chd=t:60,40&amp;chs=500x200&amp;chl=Hello|World&amp;.png&quot;</span>
    <span class="n">chart</span> <span class="o">=</span> <span class="n">IMG</span><span class="p">(</span><span class="n">_src</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">_width</span><span class="o">=</span><span class="s2">&quot;250&quot;</span><span class="p">,</span> <span class="n">_height</span><span class="o">=</span><span class="s2">&quot;100&quot;</span><span class="p">)</span>

    <span class="c1"># create a small table with some data:</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">THEAD</span><span class="p">(</span><span class="n">TR</span><span class="p">(</span><span class="n">TH</span><span class="p">(</span><span class="s2">&quot;Key&quot;</span><span class="p">,</span> <span class="n">_width</span><span class="o">=</span><span class="s2">&quot;70%&quot;</span><span class="p">),</span> <span class="n">TH</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">,</span> <span class="n">_width</span><span class="o">=</span><span class="s2">&quot;30%&quot;</span><span class="p">))),</span>
            <span class="n">TBODY</span><span class="p">(</span><span class="n">TR</span><span class="p">(</span><span class="n">TD</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">),</span> <span class="n">TD</span><span class="p">(</span><span class="s2">&quot;60&quot;</span><span class="p">)),</span> 
                  <span class="n">TR</span><span class="p">(</span><span class="n">TD</span><span class="p">(</span><span class="s2">&quot;World&quot;</span><span class="p">),</span> <span class="n">TD</span><span class="p">(</span><span class="s2">&quot;40&quot;</span><span class="p">)))]</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">TABLE</span><span class="p">(</span><span class="o">*</span><span class="n">rows</span><span class="p">,</span> <span class="n">_border</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">_align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">_width</span><span class="o">=</span><span class="s2">&quot;50%&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;pdf&quot;</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">gluon.contrib.fpdf</span> <span class="kn">import</span> <span class="n">FPDF</span><span class="p">,</span> <span class="n">HTMLMixin</span>

        <span class="c1"># create a custom class with the required functionality </span>
        <span class="k">class</span> <span class="nc">MyFPDF</span><span class="p">(</span><span class="n">FPDF</span><span class="p">,</span> <span class="n">HTMLMixin</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">header</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
                <span class="sd">&quot;&quot;&quot;hook to draw custom page header (logo and title)&quot;&quot;&quot;</span>
                <span class="n">logo</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">web2py_path</span><span class="p">,</span> <span class="s2">&quot;gluon&quot;</span><span class="p">,</span> <span class="s2">&quot;contrib&quot;</span><span class="p">,</span> <span class="s2">&quot;pyfpdf&quot;</span><span class="p">,</span> <span class="s2">&quot;tutorial&quot;</span><span class="p">,</span> <span class="s2">&quot;logo_pb.png&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">logo</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">33</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="s1">&#39;helvetica&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">(</span><span class="mi">65</span><span class="p">)</span> <span class="c1"># padding</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">footer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="sd">&quot;&quot;&quot;hook to draw custom page footer (printing page numbers)&quot;&quot;&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_y</span><span class="p">(</span><span class="o">-</span><span class="mi">15</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="s1">&#39;helvetica&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                <span class="n">txt</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Page </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">page_no</span><span class="p">()</span><span class="si">}</span><span class="s1"> of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">alias_nb_pages</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)</span>

        <span class="n">pdf</span> <span class="o">=</span> <span class="n">MyFPDF</span><span class="p">()</span>
        <span class="c1"># create a page and serialize/render HTML objects</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">add_page</span><span class="p">()</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">write_html</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">XML</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">sanitize</span><span class="o">=</span><span class="kc">False</span><span class="p">)))</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">write_html</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">XML</span><span class="p">(</span><span class="n">CENTER</span><span class="p">(</span><span class="n">chart</span><span class="p">),</span> <span class="n">sanitize</span><span class="o">=</span><span class="kc">False</span><span class="p">)))</span>
        <span class="c1"># prepare PDF to download:</span>
        <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;application/pdf&#39;</span>
        <span class="k">return</span> <span class="n">pdf</span><span class="o">.</span><span class="n">output</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># normal html view:</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">chart</span><span class="o">=</span><span class="n">chart</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="n">table</span><span class="p">)</span>
</code></pre></div>
<h1 id="sample-table-listing">Sample Table Listing</h1>
<p>Also, you can make nice tables that automatically spreads over several pages, with headers and footers, column and row highlighting, etc., in a very pythonic way:</p>
<p>Sample: <a href="http://pyfpdf.googlecode.com/files/listing.pdf">listing.pdf</a></p>
<p>Updated Live Demo (HTML and PDF version):</p>
<ul>
<li><a href="http://www.web2py.com.ar/fpdf/default/listing">http://www.web2py.com.ar/fpdf/default/listing</a></li>
<li><a href="http://www.web2py.com.ar/fpdf/default/listing.pdf">http://www.web2py.com.ar/fpdf/default/listing.pdf</a></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">listing</span><span class="p">():</span>
    <span class="n">response</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;web2py sample listing&quot;</span>

    <span class="c1"># define header and footers:</span>
    <span class="n">head</span> <span class="o">=</span> <span class="n">THEAD</span><span class="p">(</span><span class="n">TR</span><span class="p">(</span><span class="n">TH</span><span class="p">(</span><span class="s2">&quot;Header 1&quot;</span><span class="p">,</span> <span class="n">_width</span><span class="o">=</span><span class="s2">&quot;50%&quot;</span><span class="p">),</span> 
                    <span class="n">TH</span><span class="p">(</span><span class="s2">&quot;Header 2&quot;</span><span class="p">,</span> <span class="n">_width</span><span class="o">=</span><span class="s2">&quot;30%&quot;</span><span class="p">),</span>
                    <span class="n">TH</span><span class="p">(</span><span class="s2">&quot;Header 3&quot;</span><span class="p">,</span> <span class="n">_width</span><span class="o">=</span><span class="s2">&quot;20%&quot;</span><span class="p">),</span> 
                    <span class="n">_bgcolor</span><span class="o">=</span><span class="s2">&quot;#A0A0A0&quot;</span><span class="p">))</span>
    <span class="n">foot</span> <span class="o">=</span> <span class="n">TFOOT</span><span class="p">(</span><span class="n">TR</span><span class="p">(</span><span class="n">TH</span><span class="p">(</span><span class="s2">&quot;Footer 1&quot;</span><span class="p">,</span> <span class="n">_width</span><span class="o">=</span><span class="s2">&quot;50%&quot;</span><span class="p">),</span> 
                    <span class="n">TH</span><span class="p">(</span><span class="s2">&quot;Footer 2&quot;</span><span class="p">,</span> <span class="n">_width</span><span class="o">=</span><span class="s2">&quot;30%&quot;</span><span class="p">),</span>
                    <span class="n">TH</span><span class="p">(</span><span class="s2">&quot;Footer 3&quot;</span><span class="p">,</span> <span class="n">_width</span><span class="o">=</span><span class="s2">&quot;20%&quot;</span><span class="p">),</span>
                    <span class="n">_bgcolor</span><span class="o">=</span><span class="s2">&quot;#E0E0E0&quot;</span><span class="p">))</span>

    <span class="c1"># create several rows:</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
        <span class="n">col</span> <span class="o">=</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="ow">and</span> <span class="s2">&quot;#F0F0F0&quot;</span> <span class="ow">or</span> <span class="s2">&quot;#FFFFFF&quot;</span>
        <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TR</span><span class="p">(</span><span class="n">TD</span><span class="p">(</span><span class="s2">&quot;Row </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span><span class="n">i</span><span class="p">),</span>
                       <span class="n">TD</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">,</span> <span class="n">_align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">),</span>
                       <span class="n">TD</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="n">_align</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">),</span>
                       <span class="n">_bgcolor</span><span class="o">=</span><span class="n">col</span><span class="p">))</span> 

    <span class="c1"># make the table object</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">TBODY</span><span class="p">(</span><span class="o">*</span><span class="n">rows</span><span class="p">)</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">TABLE</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">head</span><span class="p">,</span> <span class="n">foot</span><span class="p">,</span> <span class="n">body</span><span class="p">],</span> 
                  <span class="n">_border</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">_align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">_width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;pdf&quot;</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">gluon.contrib.fpdf</span> <span class="kn">import</span> <span class="n">FPDF</span><span class="p">,</span> <span class="n">HTMLMixin</span>

        <span class="c1"># define our FPDF class (move to modules if it is reused frequently)</span>
        <span class="k">class</span> <span class="nc">MyFPDF</span><span class="p">(</span><span class="n">FPDF</span><span class="p">,</span> <span class="n">HTMLMixin</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">header</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="s1">&#39;helvetica&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">footer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_y</span><span class="p">(</span><span class="o">-</span><span class="mi">15</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="s1">&#39;helvetica&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                <span class="n">txt</span> <span class="o">=</span> <span class="s1">&#39;Page </span><span class="si">%s</span><span class="s1"> of </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">page_no</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">alias_nb_pages</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)</span>

        <span class="n">pdf</span> <span class="o">=</span> <span class="n">MyFPDF</span><span class="p">()</span>
        <span class="c1"># first page:</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">add_page</span><span class="p">()</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">write_html</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">XML</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">sanitize</span><span class="o">=</span><span class="kc">False</span><span class="p">)))</span>
        <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;application/pdf&#39;</span>
        <span class="k">return</span> <span class="n">pdf</span><span class="o">.</span><span class="n">output</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># normal html view:</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">table</span><span class="o">=</span><span class="n">table</span><span class="p">)}}}</span>
</code></pre></div>
<h1 id="samples-template-definitions">Samples Template Definitions</h1>
<p>As stated in the <a href="Templates.html">Templates</a> page, there are 3 ways of putting your templates in place. As in that page there are samples for the manually hardcoded way and CSV document loading. Here we will only show a sample of the template engine.</p>
<h1 id="sample-templating-engine">Sample Templating Engine</h1>
<p>PyFPDF and web2py can be used to make PDF documents using templates like invoices, badges, certificates, etc.:</p>
<p>Sample: <a href="http://pyfpdf.googlecode.com/files/invoice.pdf">invoice.pdf</a></p>
<p>Updated Live Demo: <a href="http://www.web2py.com.ar/fpdf/default/invoice.pdf">http://www.web2py.com.ar/fpdf/default/invoice.pdf</a></p>
<p>To handle multiple templates, we can define two tables in web2py:</p>
<ul>
<li>pdf_template: general document information (name, paper size, etc.)</li>
<li>pdf_element: several rows for each document, describing graphics primitives and placeholders.</li>
</ul>
<p>In <code>db.py</code> write:
<div class="highlight"><pre><span></span><code><span class="n">db</span><span class="o">.</span><span class="n">define_table</span><span class="p">(</span><span class="s2">&quot;pdf_template&quot;</span><span class="p">,</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;pdf_template_id&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="n">requires</span><span class="o">=</span><span class="n">IS_IN_SET</span><span class="p">([</span><span class="s2">&quot;A4&quot;</span><span class="p">,</span> <span class="s2">&quot;legal&quot;</span><span class="p">,</span> <span class="s2">&quot;letter&quot;</span><span class="p">])),</span>
<span class="p">)</span>

<span class="n">db</span><span class="o">.</span><span class="n">define_table</span><span class="p">(</span><span class="s2">&quot;pdf_element&quot;</span><span class="p">,</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;pdf_template_id&quot;</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">pdf_template</span><span class="p">,</span> <span class="n">requires</span><span class="o">=</span><span class="n">IS_IN_DB</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="s1">&#39;pdf_template.pdf_template_id&#39;</span><span class="p">,</span> <span class="s1">&#39;pdf_template.title&#39;</span><span class="p">)),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">requires</span><span class="o">=</span><span class="n">IS_NOT_EMPTY</span><span class="p">()),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">requires</span><span class="o">=</span><span class="n">IS_IN_SET</span><span class="p">([</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;BC&#39;</span><span class="p">])),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="s2">&quot;double&quot;</span><span class="p">,</span> <span class="n">requires</span><span class="o">=</span><span class="n">IS_NOT_EMPTY</span><span class="p">()),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="s2">&quot;double&quot;</span><span class="p">,</span> <span class="n">requires</span><span class="o">=</span><span class="n">IS_NOT_EMPTY</span><span class="p">()),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="s2">&quot;double&quot;</span><span class="p">,</span> <span class="n">requires</span><span class="o">=</span><span class="n">IS_NOT_EMPTY</span><span class="p">()),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="s2">&quot;double&quot;</span><span class="p">,</span> <span class="n">requires</span><span class="o">=</span><span class="n">IS_NOT_EMPTY</span><span class="p">()),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;font&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;helvetica&quot;</span><span class="p">,</span> <span class="n">requires</span><span class="o">=</span><span class="n">IS_IN_SET</span><span class="p">([</span><span class="s1">&#39;Courier&#39;</span><span class="p">,</span> <span class="s1">&#39;helvetica&#39;</span><span class="p">,</span> <span class="s1">&#39;Times&#39;</span><span class="p">,</span> <span class="s1">&#39;Symbol&#39;</span><span class="p">,</span> <span class="s1">&#39;Zapfdingbats&#39;</span><span class="p">])),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;size&quot;</span><span class="p">,</span> <span class="s2">&quot;double&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="n">requires</span><span class="o">=</span><span class="n">IS_NOT_EMPTY</span><span class="p">()),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;bold&quot;</span><span class="p">,</span> <span class="s2">&quot;boolean&quot;</span><span class="p">),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;italic&quot;</span><span class="p">,</span> <span class="s2">&quot;boolean&quot;</span><span class="p">),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;underline&quot;</span><span class="p">,</span> <span class="s2">&quot;boolean&quot;</span><span class="p">),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;foreground&quot;</span><span class="p">,</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mh">0x000000</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;Color text&quot;</span><span class="p">),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;background&quot;</span><span class="p">,</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mh">0xFFFFFF</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;Fill color&quot;</span><span class="p">),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;align&quot;</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;L&quot;</span><span class="p">,</span> <span class="n">requires</span><span class="o">=</span><span class="n">IS_IN_SET</span><span class="p">([</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;J&#39;</span><span class="p">])),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;Default text&quot;</span><span class="p">),</span>
    <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;priority&quot;</span><span class="p">,</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;Z-Order&quot;</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></p>
<p><strong>Warning</strong>: the fields "type", "size" and "text" are reserved words for some DB engines, so validation:</p>
<p><div class="highlight"><pre><span></span><code><span class="n">db</span> <span class="o">=</span> <span class="n">DAL</span><span class="p">(</span><span class="s1">&#39;sqlite://storage.sqlite&#39;</span><span class="p">,</span> <span class="n">pool_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">check_reserved</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ALL&#39;</span><span class="p">])</span>
</code></pre></div>
will fail. sqlite, MySQL and postgres work OK. Proposals for new naming ideas are welcome.</p>
<p>At this point you could go to web2py AppAdmin and start to define your document templates, or use import/export functions to reuse your already defined formats!</p>
<p>Note: if you used designer.py to create the templates, and you want to import the templates with the Web2Py database admin, you will have to modify the file.</p>
<p>So, designer.py outputs a file like this:
<div class="highlight"><pre><span></span><code>line0;T;20.0;13.0;190.0;13.0;times;10.0;0;0;0;0;65535;C;;0
line1;T;20.0;67.0;190.0;67.0;times;10.0;0;0;0;0;65535;C;;0
name0;T;21;14;104;25;times;16.0;0;0;0;0;0;C;;2
title0;T;64;26;104;30;times;10.0;0;0;0;0;0;C;;2
</code></pre></div></p>
<p>You will have to make it look lke this:</p>
<p><div class="highlight"><pre><span></span><code>pdf_element.pdf_template_id, pdf_element.name, pdf_element.type, pdf_element.x1, pdf_element.y1, pdf_element.x2, pdf_element.y2, pdf_element.font, pdf_element.size, pdf_element.bold, pdf_element.italic, pdf_element.underline, pdf_element.foreground, pdf_element.background, pdf_element.align, pdf_element.text, pdf_element.priority
1,line0,T,20.0,283.0,190.0,283.0,times,10.0,0,0,0,0,65535,C,,0
1,line1,T,20.0,337.0,190.0,337.0,times,10.0,0,0,0,0,65535,C,,0
1,name0,T,21,14,104,25,times,16.0,0,0,0,0,0,C,,2
1,title0,T,64,26,104,30,times,10.0,0,0,0,0,0,C,,2
</code></pre></div>
Where the first number indicates the template ID (important for the database system), and the first line indicates the database fields to fill.</p>
<p>A simple Python script should do the trick.</p>
<p>After defining and filling your database, you can use PyFPDF <a href="Templates.html">Templates</a> directly reading row elements from the web2py database:</p>
<p>For example, for an invoice, in a controller you could write:
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">invoice</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">gluon.contrib.fpdf</span> <span class="kn">import</span> <span class="n">Template</span>
    <span class="kn">import</span> <span class="nn">os.path</span>

    <span class="c1"># generate sample invoice (according Argentina&#39;s regulations)</span>

    <span class="kn">import</span> <span class="nn">random</span>
    <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>

    <span class="c1"># read elements from db </span>

    <span class="n">elements</span> <span class="o">=</span> <span class="n">db</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">pdf_element</span><span class="o">.</span><span class="n">pdf_template_id</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">orderby</span><span class="o">=</span><span class="n">db</span><span class="o">.</span><span class="n">pdf_element</span><span class="o">.</span><span class="n">priority</span><span class="p">)</span>

    <span class="n">f</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;A4&quot;</span><span class="p">,</span>
             <span class="n">elements</span> <span class="o">=</span> <span class="n">elements</span><span class="p">,</span>
             <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Sample Invoice&quot;</span><span class="p">,</span> <span class="n">author</span><span class="o">=</span><span class="s2">&quot;Sample Company&quot;</span><span class="p">,</span>
             <span class="n">subject</span><span class="o">=</span><span class="s2">&quot;Sample Customer&quot;</span><span class="p">,</span> <span class="n">keywords</span><span class="o">=</span><span class="s2">&quot;Electronic TAX Invoice&quot;</span><span class="p">)</span>

    <span class="c1"># create some random invoice line items and detail data</span>
    <span class="n">detail</span> <span class="o">=</span> <span class="s2">&quot;Lorem ipsum dolor sit amet, consectetur. &quot;</span> <span class="o">*</span> <span class="mi">5</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">):</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="s2">&quot;Sample product </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span>
        <span class="n">qty</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">price</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%02d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="mi">90</span><span class="p">)),</span> <span class="nb">chr</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="mi">90</span><span class="p">)),</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;u&#39;</span><span class="p">,</span>
                          <span class="n">qty</span><span class="o">=</span><span class="n">qty</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="n">price</span><span class="p">,</span> 
                          <span class="n">amount</span><span class="o">=</span><span class="n">qty</span> <span class="o">*</span> <span class="n">price</span><span class="p">,</span>
                          <span class="n">ds</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">ds</span><span class="p">)))</span>

    <span class="c1"># divide and count lines</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">li_items</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="n">qty</span> <span class="o">=</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;qty&#39;</span><span class="p">]</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;unit&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">split_multicell</span><span class="p">(</span><span class="n">it</span><span class="p">[</span><span class="s1">&#39;ds&#39;</span><span class="p">],</span> <span class="s1">&#39;item_description01&#39;</span><span class="p">):</span>
            <span class="c1"># add item description line (without price nor amount)</span>
            <span class="n">li_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="n">ds</span><span class="p">,</span> <span class="n">qty</span><span class="o">=</span><span class="n">qty</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
            <span class="c1"># clean qty and code (show only at first)</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="n">qty</span> <span class="o">=</span> <span class="n">code</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># set last item line price and amount</span>
        <span class="n">li_items</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">amount</span> <span class="o">=</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">],</span>
                            <span class="n">price</span> <span class="o">=</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">])</span>

    <span class="c1"># split detail into each line description</span>
    <span class="n">obs</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&lt;U&gt;Detail:&lt;/U&gt;</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">detail</span>
    <span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">split_multicell</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="s1">&#39;item_description01&#39;</span><span class="p">):</span>
        <span class="n">li_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="n">ds</span><span class="p">,</span> <span class="n">qty</span><span class="o">=</span><span class="n">qty</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>

    <span class="c1"># calculate pages:</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">li_items</span><span class="p">)</span>
    <span class="n">max_lines_per_page</span> <span class="o">=</span> <span class="mi">24</span>
    <span class="n">pages</span> <span class="o">=</span> <span class="n">lines</span> <span class="o">/</span> <span class="p">(</span><span class="n">max_lines_per_page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">lines</span> <span class="o">%</span> <span class="p">(</span><span class="n">max_lines_per_page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span> <span class="n">pages</span> <span class="o">=</span> <span class="n">pages</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="c1"># fill placeholders for each page</span>
    <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">pages</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">f</span><span class="o">.</span><span class="n">add_page</span><span class="p">()</span>
        <span class="n">f</span><span class="p">[</span><span class="s1">&#39;page&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Page </span><span class="si">%s</span><span class="s1"> of </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">pages</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pages</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">page</span> <span class="o">&lt;</span> <span class="n">pages</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;Continues on page </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">page</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">f</span><span class="p">[</span><span class="s1">&#39;item_description</span><span class="si">%02d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">max_lines_per_page</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">s</span>

        <span class="n">f</span><span class="p">[</span><span class="s2">&quot;company_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Sample Company&quot;</span>
        <span class="n">f</span><span class="p">[</span><span class="s2">&quot;company_logo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">web2py_path</span><span class="p">,</span> <span class="s2">&quot;gluon&quot;</span><span class="p">,</span> <span class="s2">&quot;contrib&quot;</span><span class="p">,</span> <span class="s2">&quot;pyfpdf&quot;</span><span class="p">,</span> <span class="s2">&quot;tutorial&quot;</span><span class="p">,</span> <span class="s2">&quot;logo.png&quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="p">[</span><span class="s2">&quot;company_header1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Some Address - somewhere -&quot;</span>
        <span class="n">f</span><span class="p">[</span><span class="s2">&quot;company_header2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;http://www.example.com&quot;</span>        
        <span class="n">f</span><span class="p">[</span><span class="s2">&quot;company_footer1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Tax Code ...&quot;</span>
        <span class="n">f</span><span class="p">[</span><span class="s2">&quot;company_footer2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Tax/VAT ID ...&quot;</span>
        <span class="n">f</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;0001-00001234&#39;</span>
        <span class="n">f</span><span class="p">[</span><span class="s1">&#39;issue_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;2010-09-10&#39;</span>
        <span class="n">f</span><span class="p">[</span><span class="s1">&#39;due_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;2099-09-10&#39;</span>
        <span class="n">f</span><span class="p">[</span><span class="s1">&#39;customer_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Sample Client&quot;</span>
        <span class="n">f</span><span class="p">[</span><span class="s1">&#39;customer_address&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Siempreviva 1234&quot;</span>

        <span class="c1"># print line item...</span>
        <span class="n">li</span> <span class="o">=</span> <span class="mi">0</span> 
        <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">total</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.00&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">li_items</span><span class="p">:</span>
            <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="n">page</span> <span class="o">*</span> <span class="p">(</span><span class="n">max_lines_per_page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="k">break</span>
            <span class="k">if</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]:</span>
                <span class="n">total</span> <span class="o">+=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%.6f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">max_lines_per_page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">li</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;qty&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">f</span><span class="p">[</span><span class="s1">&#39;item_quantity</span><span class="si">%02d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">li</span><span class="p">]</span> <span class="o">=</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;qty&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">f</span><span class="p">[</span><span class="s1">&#39;item_code</span><span class="si">%02d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">li</span><span class="p">]</span> <span class="o">=</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;unit&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">f</span><span class="p">[</span><span class="s1">&#39;item_unit</span><span class="si">%02d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">li</span><span class="p">]</span> <span class="o">=</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;unit&#39;</span><span class="p">]</span>
                <span class="n">f</span><span class="p">[</span><span class="s1">&#39;item_description</span><span class="si">%02d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">li</span><span class="p">]</span> <span class="o">=</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;ds&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">f</span><span class="p">[</span><span class="s1">&#39;item_price</span><span class="si">%02d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">li</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%0.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">f</span><span class="p">[</span><span class="s1">&#39;item_amount</span><span class="si">%02d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">li</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">it</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span>

        <span class="c1"># last page? print totals:</span>
        <span class="k">if</span> <span class="n">pages</span> <span class="o">==</span> <span class="n">page</span><span class="p">:</span>
            <span class="n">f</span><span class="p">[</span><span class="s1">&#39;net&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">total</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.21&quot;</span><span class="p">))</span>
            <span class="n">f</span><span class="p">[</span><span class="s1">&#39;vat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">total</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.21&quot;</span><span class="p">)))</span>
            <span class="n">f</span><span class="p">[</span><span class="s1">&#39;total_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Total:&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">f</span><span class="p">[</span><span class="s1">&#39;total_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;SubTotal:&#39;</span>
        <span class="n">f</span><span class="p">[</span><span class="s1">&#39;total&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">total</span>

    <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;application/pdf&#39;</span>
    <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;invoice.pdf&#39;</span><span class="p">)</span>
</code></pre></div></p>
<p>Of course, this is a hardcoded example. You can use the database to store invoices or any other data; there is no rigid class hierachy to follow, just fill your template like a dict!</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="Unicode.html" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Unicode
            </div>
          </div>
        </a>
      
      
        <a href="ReferenceManual.html" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Reference Manual
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "assets/javascripts/workers/search.f5903571.min.js", "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.3981fc68.min.js"></script>
      
    
  </body>
</html>